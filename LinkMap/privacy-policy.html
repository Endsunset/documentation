<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkMap - Privacy Policy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown.min.css">
    <link rel="stylesheet" href="https://endsunset.github.io/assets/styles/main.css">
    <link rel="stylesheet" href="https://endsunset.github.io/assets/styles/components/header.css">
    <link rel="stylesheet" href="https://endsunset.github.io/assets/styles/components/footer.css">
    <style>
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light);
            line-height: 1.6;
        }

        .project-title {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 2rem 20px;
            text-align: center;
        }

        .project-title h1 {
            margin: 0;
            font-size: 2.5rem;
        }
        
        .markdown-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 20px;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <!-- Header will be inserted here -->
    <div id="header-container"></div>

    <div class="project-title">
        <a href="https://endsunset.github.io/documentation/LinkMap/" style="text-decoration: none; color: inherit;">
            <h1>LinkMap</h1>
        </a>
    </div>
    
    <div class="markdown-container">
        <div id="content" class="markdown-body"></div>
    </div>

    <div id="footer-container"></div>

    <script>
        // Load header with error handling
        fetch('https://endsunset.github.io/partials/header.html')
            .then(response => {
                if (!response.ok) throw new Error('Header not found');
                return response.text();
            })
            .then(html => {
                document.getElementById('header-container').innerHTML = html;
            })
            .catch(error => {
                console.error('Header loading failed:', error);
                document.getElementById('header-container').innerHTML = `
                    <div class="header-fallback">
                        <a href="/">Endsunset</a> | 
                        <a href="/documentation/">Documentation</a>
                        <a href="/videos/">Videos</a>
                    </div>`;
            });

        fetch('https://endsunset.github.io/documentation/LinkMap/privacy-policy.md')
            .then(response => {
                if (!response.ok) throw new Error('Policy not found');
                return response.text();
            })
            .then(markdown => {
                return fetch('https://api.github.com/markdown', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        text: markdown,
                        mode: 'markdown'
                    })
                });
            })
            .then(response => {
                if (!response.ok) throw new Error('Markdown conversion failed');
                return response.text();
            })
            .then(html => {
                document.getElementById('content').innerHTML = html;
            })
            .catch(error => {
                console.error('Content loading failed:', error);
                document.getElementById('content').innerHTML = `
                    <div class="error-message">
                        <p>Failed to load the content. Please try again later.</p>
                    </div>`;
            });
        
        fetch('https://endsunset.github.io/partials/footer.html')
            .then(response => {
                if (!response.ok) throw new Error('Footer not found');
                return response.text();
            })
            .then(html => {
                document.getElementById('footer-container').innerHTML = html;
                document.getElementById('year').textContent = new Date().getFullYear();
            })
            .catch(error => {
                console.error('Footer loading failed:', error);
                document.getElementById('footer-container').innerHTML = `
                    <footer>
                        <p>Â© ${new Date().getFullYear()} LinkMap Project. All rights reserved.</p>
                        <div class="legal-links">
                            <a href="privacy-policy">Privacy Policy</a>
                            <a href="terms-of-service">Terms of Service</a>
                            <a href="https://github.com/Endsunset/LinkMap">GitHub Repository</a>
                        </div>
                    </footer>`;
            });
    </script>
</body>
</html>
